<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News ê´€ë¦¬ - Admin</title>
    <link rel="stylesheet" href="admin_style.css">
</head>
<body>
    <div class="admin-wrapper">
        <aside class="sidebar">
            <div class="sidebar-header"><h2>ADMIN</h2></div>
<nav class="sidebar-nav">
    <ul>
        <li><a href="index_admin.html">ğŸ“Š ëŒ€ì‹œë³´ë“œ</a></li>
        <li><a href="admin_about.html">â„¹ï¸ About ê´€ë¦¬</a></li>
        <li><a href="admin_service.html">ğŸ›  Service ê´€ë¦¬</a></li>
        <li><a href="admin_news.html">ğŸ“° News ê´€ë¦¬</a></li>
        <li><a href="admin_contact.html">ğŸ“ Contact ê´€ë¦¬</a></li>
    </ul>
</nav>
            <div class="sidebar-footer"><a href="../index.html" class="btn-exit">ğŸ  ì‚¬ì´íŠ¸ ë‚˜ê°€ê¸°</a></div>
        </aside>

        <main class="main-content">
            <header class="top-header">
                <h1>News ê´€ë¦¬</h1>
                <div class="user-info">ì†Œì‹ì„ ê´€ë¦¬í•˜ê³  ë§í¬ë¥¼ ì—°ë™í•˜ì„¸ìš”.</div>
            </header>

            <section class="admin-card-section">
                <div class="section-title">ğŸ“° ë‰´ìŠ¤ ë¦¬ìŠ¤íŠ¸</div>
                <div class="table-container">
                    <table class="partner-table">
                        <thead>
                            <tr>
                                <th>ì´ë¯¸ì§€</th>
                                <th>ì œëª© / ì†Œì œëª©</th>
                                <th>ì‘ì„±ì / ë‚ ì§œ</th>
                                <th>ì—°ê²° ë§í¬</th>
                                <th>ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><div class="table-img-box"><img src="https://via.placeholder.com/100x60" alt="news"></div></td>
                                <td>
                                    <strong>ê³µì‹ ì›¹ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼</strong><br>
                                    <small class="text-muted">ë” í¸ë¦¬í•´ì§„ ì„œë¹„ìŠ¤ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”</small>
                                </td>
                                <td>ê´€ë¦¬ì<br><small>2024-05-20</small></td>
                                <td><a href="https://example.com" target="_blank" class="link-text">ë°©ë¬¸í•˜ê¸° ğŸ”—</a></td>
                                <td>
                                    <button class="btn-table-edit" onclick="showForm('edit', 'ê³µì‹ ì›¹ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼', 'ë” í¸ë¦¬í•´ì§„ ì„œë¹„ìŠ¤ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”', 'ê´€ë¦¬ì', '2024-05-20', 'https://example.com')">ìˆ˜ì •</button>
                                    <button class="btn-table-delete">ì‚­ì œ</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="table-actions" style="justify-content: flex-end; margin-top: 15px;">
                    <button class="btn-save-all" style="background-color: #4299e1;" onclick="showForm('add')">+ ìƒˆ ë‰´ìŠ¤ ì‘ì„±</button>
                </div>
            </section>

            <section id="newsFormSection" class="admin-card-section" style="display: none; border-top: 4px solid #4299e1;">
                <div class="section-title" id="formTitle">â• ìƒˆ ë‰´ìŠ¤ ì‘ì„±</div>
                <form id="newsForm" class="large-form">
                    <div class="input-group">
                        <label>ë‰´ìŠ¤ ì œëª©</label>
                        <input type="text" id="newsTitle" class="input-lg" placeholder="ë‰´ìŠ¤ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                    </div>
                    
                    <div class="input-group">
                        <label>ì†Œì œëª© (ë‚´ìš© ìš”ì•½)</label>
                        <textarea id="newsSubTitle" class="input-lg" rows="3" placeholder="ë‰´ìŠ¤ì— ëŒ€í•œ ì§§ì€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                    </div>

                    <div class="input-row-3">
                        <div class="input-group">
                            <label>ì‘ì„±ì</label>
                            <input type="text" id="newsAuthor" class="input-lg" value="ê´€ë¦¬ì">
                        </div>
                        <div class="input-group">
                            <label>ì‘ì„±ì¼</label>
                            <input type="date" id="newsDate" class="input-lg">
                        </div>
                        <div class="input-group">
                            <label>ì—°ë™ ë§í¬ (URL)</label>
                            <input type="url" id="newsLink" class="input-lg" placeholder="https://...">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>ëŒ€í‘œ ì´ë¯¸ì§€</label>
                        <div class="upload-box-lg" onclick="document.getElementById('newsFile').click()">
                            <input type="file" id="newsFile" accept="image/*" hidden onchange="previewNewsImage(this)">
                            <div id="newsPreview">
                                <span>ì´ê³³ì„ í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš” (ê¶Œì¥: 800x400)</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions-lg">
                        <button type="button" class="btn-cancel-lg" onclick="hideForm()">ì°½ ë‹«ê¸°</button>
                        <button type="submit" class="btn-save-lg">ë‰´ìŠ¤ ì €ì¥í•˜ê¸°</button>
                    </div>
                </form>
            </section>
        </main>
    </div>

    <script>
        const formSection = document.getElementById('newsFormSection');
        const formTitle = document.getElementById('formTitle');

        function showForm(mode, title='', sub='', author='ê´€ë¦¬ì', date='', link='') {
            formSection.style.display = 'block';
            if(mode === 'add') {
                formTitle.innerText = "â• ìƒˆ ë‰´ìŠ¤ ì‘ì„±";
                document.getElementById('newsForm').reset();
                document.getElementById('newsPreview').innerHTML = "<span>ì´ê³³ì„ í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”</span>";
            } else {
                formTitle.innerText = "âœï¸ ë‰´ìŠ¤ ë‚´ìš© ìˆ˜ì •";
                document.getElementById('newsTitle').value = title;
                document.getElementById('newsSubTitle').value = sub;
                document.getElementById('newsAuthor').value = author;
                document.getElementById('newsDate').value = date;
                document.getElementById('newsLink').value = link;
            }
            // í¼ì´ ìˆëŠ” ì•„ë˜ìª½ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
            formSection.scrollIntoView({ behavior: 'smooth' });
        }

        function hideForm() {
            formSection.style.display = 'none';
        }

        function previewNewsImage(input) {
            const preview = document.getElementById('newsPreview');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `<img src="${e.target.result}" style="max-height: 250px; width: auto; border-radius: 8px;">`;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</body>

<script>
    // 1. ë°ì´í„° ë¡œë“œ
    document.addEventListener('DOMContentLoaded', loadNews);

    function showForm(mode, title='', sub='', author='ê´€ë¦¬ì', date='', link='') {
        document.getElementById('newsFormSection').style.display = 'block';
        if(mode === 'add') {
            document.getElementById('newsForm').reset();
            document.getElementById('newsPreview').innerHTML = "<span>ì´ë¯¸ì§€ ì—…ë¡œë“œ</span>";
        } else {
            document.getElementById('newsTitle').value = title;
            document.getElementById('newsSubTitle').value = sub;
            document.getElementById('newsAuthor').value = author;
            document.getElementById('newsDate').value = date;
            document.getElementById('newsLink').value = link;
        }
        document.getElementById('newsFormSection').scrollIntoView({ behavior: 'smooth' });
    }

    // 2. ì €ì¥ ê¸°ëŠ¥ (LocalStorage)
    document.getElementById('newsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const newsData = {
            title: document.getElementById('newsTitle').value,
            sub: document.getElementById('newsSubTitle').value,
            author: document.getElementById('newsAuthor').value,
            date: document.getElementById('newsDate').value,
            link: document.getElementById('newsLink').value,
            img: document.querySelector('#newsPreview img')?.src || ''
        };

        let newsList = JSON.parse(localStorage.getItem('newsData') || '[]');
        newsList.push(newsData);
        localStorage.setItem('newsData', JSON.stringify(newsList));
        
        alert('ë‰´ìŠ¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        location.reload(); // í™”ë©´ ê°±ì‹ 
    });

    function loadNews() {
        const newsList = JSON.parse(localStorage.getItem('newsData') || '[]');
        const tbody = document.querySelector('.partner-table tbody');
        tbody.innerHTML = ''; // ì´ˆê¸°í™”

        newsList.forEach((news, index) => {
            tbody.innerHTML += `
                <tr>
                    <td><div class="table-img-box"><img src="${news.img || 'https://via.placeholder.com/100'}"></div></td>
                    <td><strong>${news.title}</strong><br><small>${news.sub}</small></td>
                    <td>${news.author}<br><small>${news.date}</small></td>
                    <td><a href="${news.link}" target="_blank">ë§í¬ ì´ë™</a></td>
                    <td>
                        <button class="btn-table-delete" onclick="deleteNews(${index})">ì‚­ì œ</button>
                    </td>
                </tr>
            `;
        });
    }

    function deleteNews(index) {
        let newsList = JSON.parse(localStorage.getItem('newsData'));
        newsList.splice(index, 1);
        localStorage.setItem('newsData', JSON.stringify(newsList));
        loadNews();
    }
</script>
</html>

